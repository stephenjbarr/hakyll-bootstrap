<!DOCTYPE html>
<html>
<head>
<title>Using Hakyll, Org-mode, and Bootstrap</title>
<!-- 2015-05-02 Sat 22:19 -->
<meta  charset="utf-8">
<meta  name="generator" content="Org-mode">
<meta  name="author" content="Stephen">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Using Hakyll, Org-mode, and Bootstrap</h1>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> The New Setup</h2>
<div class="outline-text-2" id="text-1">
<p>
I just decided to switch blogging platforms.  I found myself writing
blogposts and not posting them and that suggested to me that the
startup cost of my current setup was too high, and I was
subconciously avoiding posting.
</p>

<p>
I had in the back of my mind a new setup and this weekend, I needed
a mental break and this seemed like a good use of an afternoon.
My new setup needed to meet the following requirements.
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Requirements</h3>
<div class="outline-text-3" id="text-1-1">
<ol class="org-ol">
<li>Static site. This way, I do not have to deal with hosting or
security issues.  Ideally, the static site generator would be
written in a language that I know and am comfortable with.
</li>
<li>Support authoring posts in <a href="http://orgmode.org/">Org-mode</a>. This would be a
supermodular in utility for me, because I already heavily use
Org-mode for managing my TODO lists, calendar, writing papers,
taking notes, and citing papers.
</li>
<li>Enable customization without requiring it.  With Octopress, I
felt a bit stuck to simply applying pre-applied themes.
</li>
<li>Allow me to use <a href="http://getbootstrap.com/">Bootstrap</a>. I am not a designer, so I want to
leverage other peoples' work in this area.
</li>
</ol>
</div>
</div>
</div>


<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> The software stack</h2>
<div class="outline-text-2" id="text-2">
<table class="table table-hover table-bordered">


<colgroup>
<col  class="left">

<col  class="left">

<col  class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Component</th>
<th scope="col" class="left">Purpose</th>
<th scope="col" class="left">Language</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><a href="http://jaspervdj.be/hakyll/">Hakyll</a></td>
<td class="left">Site generator</td>
<td class="left">Haskell</td>
</tr>

<tr>
<td class="left"><a href="http://getbootstrap.com/">Bootstrap</a></td>
<td class="left">Layout and theme</td>
<td class="left">CSS, Javascript</td>
</tr>

<tr>
<td class="left"><a href="http://www.gnu.org/software/emacs/">Emacs</a> + <a href="http://orgmode.org/">Org-mode</a></td>
<td class="left"><a href="http://orgmode.org/manual/HTML-export.html">Generating HTML</a></td>
<td class="left">Org-mode, LISP</td>
</tr>

<tr>
<td class="left"><a href="https://hackage.haskell.org/package/shake">Shake</a></td>
<td class="left">Build system</td>
<td class="left">Haskell DSL</td>
</tr>
</tbody>
</table>
</div>



<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Why these components?</h3>
<div class="outline-text-3" id="text-2-1">
<p>
<b>NOTE:</b> I am writing this system so I remember why I made the
choices that I have, outsourcing my memory to a more reliable
substrate than my own.
</p>

<p>
<a href="http://jaspervdj.be/hakyll/">Hakyll</a> had what I was looking for in a site generator.  It
generates static sites and seems to have an active community.  Its
role is to take content, apply transformations, apply templates and
CSS, and generate the HTML comprising the website itself.
<a href="http://www.reddit.com/r/haskell/comments/23xgzf/thoughts_on_hakyll_vs_octopress_for_an/">This discussion</a> on the <a href="http://reddit.com/r/haskell">Haskell subreddit</a> was very helpful.
</p>


<p>
<a href="http://getbootstrap.com/">Bootstrap</a> sites look really nice, and seem to be really popular.  I
want to give myself the option to customize the site later, (or
hire someone else to do so), and Bootstrap seems <a href="http://en.wikipedia.org/wiki/Network_effect">extremely popular</a>.
It seems very customizable, but at the same time it did not take
much work at all to get things set up. I know very little about
HTML and CSS and do not want to jump too far down that rabbit hole
at the moment. I may experiment with the <a href="http://bootswatch.com/darkly/">Darkly</a> bootstrap theme.
</p>

<p>
To get started, I forked <a href="http://www.stephendiehl.com/">Stephen Diehl's</a> <a href="https://github.com/sdiehl/hakyll-bootstrap">Hakyll-Bootstrap</a>
repository, which is a barebones bootstrap-based site generated
using Hakyll.
</p>

<p>
<a href="http://orgmode.org/">Org-mode</a> needs its own writeup. I have been building up my org-mode
setup gradually since being an undergrad. It manages my calendar,
TODO lists, and everything. I am very comfortable writing in
org-mode, and it is easier for me to write documents with
citations, tables, and equations using org-mode rather than
Markdown. Note, I am using Org-mode to generate the HTML, rather
than Pandoc. This gives me a bit more control over the HTML. 
</p>

<p>
<a href="https://hackage.haskell.org/package/shake">Shake</a> is a build system. I am using this simply to manage exporting
the Org-mode files for the HTML export, and run the script to
generate the metadata files.
</p>
</div>
</div>
</div>




<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Details of the setup, how to get started</h2>
<div class="outline-text-2" id="text-3">
<ol class="org-ol">
<li>Fork <a href="https://github.com/sdiehl/hakyll-bootstrap">Hakyll-Bootstrap</a> and follow the build instructions
</li>
<li>Create a <code>posts-src</code> folder at the root. 
This is where the <code>.org</code> flies go.
</li>
<li>Write some content.
</li>
<li>Add any necessary tags using <code>ATTR_HTML</code>.
In the <i>A post template</i> section, see that I added a few classes to the table.
This allowed the bootstrap to style these tables.
</li>
<li>To export from Org-mode to HTML, from Emacs do <code>C-c C-e C-b h h</code>
(yes, it's Emacs :) ).  The <code>C-c C-e</code> turns on the export option,
<code>C-b</code> toggles body-only export, the first <code>h</code> is for HTML export,
the second <code>h</code> is for export html to file.
</li>
</ol>
</div>




<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> A Simple Hakyll HTML compiler</h3>
</div>


<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> A post template</h3>
<div class="outline-text-3" id="text-3-2">
<p>
The <code>org-mode</code> source to a post could look like this:
</p>

<script src="https://gist.github.com/stephenjbarr/cd51b2f951e42615f48c.js"></script>
</div>
</div>
</div>


<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> List of use cases to test / figure out / document</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li><code>[&#xa0;]</code> Citing papers with <a href="http://kitchingroup.cheme.cmu.edu/blog/2014/05/13/Using-org-ref-for-citations-and-references/">org-ref</a>
</li>
<li><code>[&#xa0;]</code> Source code embedding without using Github gists
</li>
<li><code>[&#xa0;]</code> Automate exporting of <code>.org</code> to <code>.html</code> using a build system (Shake)
</li>
<li><code>[&#xa0;]</code> Understand how to toggle posts being previewed without being published
</li>
<li><code>[&#xa0;]</code> How to use tags within Hakyll
</li>
<li>white girl watsted
</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2015-01-30</p>
<p class="author">Author: Stephen</p>
<p class="date">Created: 2015-05-02 Sat 22:19</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.0.50.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
